# 正则表达式与模式匹配

## 定义正则表达式

1. 一对包在(/)内的字符  例如

   ``` javascript
   let pattern = /s$/; // 匹配以s结尾的字符
   ```

2. 字符多数由字幕数字组成    /s$/i 加上 i 表示不区分大小写

   

#### 字符字面量

 1. \反斜杠转义可以匹配不是字母的字符 如: \n 匹配换行字面量

 2. 具有特殊含义的字符: ^ $ . * + ? = ! : | \ / ( ) [ ] { }

 3. 不惧特殊含义的则仍旧匹配自身 如: @...

    

#### 字符类

1. 把字符放进[ ]内就可以组成字符类 例如: 

   ```javascript
   /[abc]/  // 字符类匹配括号内任意字符 匹配: a, b, c 中任意字母
   ```

2. (^) 排除性字符

   ```javascript
   /[^abc]/ // 匹配 a, b, c 外任意字母
   ```

   ```javascript
   /[a-z]/ // 匹配a-z 全部小写字符
   ```

3. 正则表达式字符类

   | **字符** | **匹配目标**                                |
   | -------- | ------------------------------------------- |
   | [...]    | 方括号内的任意一个字符                      |
   | [^...]   | 不在方括号内的任意一个字符                  |
   | \w       | 任意ASCII单词字符。等价于[a-zA-Z0-9_]       |
   | \W       | 任意非ASCII单词字符。等价于[  ^a-zA-Z0-9_ ] |
   | \s       | 任意Unicode空白字符                         |
   | \S       | 任意非Unicode空白字符                       |
   | \d       | 任意ASCII数字字符。等价于[0-9]              |
   | \D       | 任意非ASCII数字字符。等于[ ^0-9]            |
   | [\b]     | 退格字符和字面量(特例)                      |



#### 重复

| **字符** | **含义**                                                  |
| -------- | --------------------------------------------------------- |
| {n, m}   | 匹配前项至少n次, 但不超过m次                              |
| {n, }    | 匹配前项n次或更多次                                       |
| {n}      | 匹配前项恰好n次                                           |
| ?        | 匹配前项0次或1次。 换句话说, 前项是可选的。 等价于 {0, 1} |
| +        | 匹配前项一次或者多次。 等价于 {1, }                       |
| *        | 匹配前项0次或多次。 等价于 {0, }                          |

##### 示例

```javascript
let r = /\d{2, 4}/; // 匹配2到4位数数字
r = /\w{3}\d?/;     // 匹配3个字母后跟1个可选的数字
r = /\s+java\s+/;  // 匹配"java"且前后有一个或多个空格
r = /[^(]*/;      // 匹配一个或多个非开始圆括号的字符
```



#### 非贪婪重复

1. 后面加上一个(?) 进行非贪婪匹配

   

#### 任选、分组和引用

1. 任选: 用(|) 把表达式分开  |  从左到有匹配

   ```javascript
   /ab|cd|ef/; //匹配字符串"ab"、"cd" 或 "ef"
   ```

   

2. ( ) 可以用来定义*__子表达式__* (分组)             可用(\\) 字符加上数字*__引用__*子表达式匹配的文本 补充: 按照左括号的顺序来匹配

3. 如果不想某个子表达式被引用 可以在子表达式开头加上(?:) 这样引用就会忽视他的存在而去引用下一个子表达式

   ```javascript
   /([Jj]ava(?:[Ss]cript)\sis\s(fun\w*)/  // 使用引用\2 匹配到的是(fun\w*)
   ```

   

##### 任选、分组和引用

| 字符        | 含义                                                         |
| ----------- | ------------------------------------------------------------ |
| \\|         | 任选: 可以匹配左侧的子表达式 也可以右侧                      |
| (...)       | 分组: 将模式分组为单元 方便使用*、+、?、\|等。同时记住分组匹配的字符，方便后面的引用中使用 |
| (**?:**...) | 仅分组: 将模式分组为单元，但不记住分组的匹配字符             |
| \n          | 匹配与第n个分组匹配的的相同字符。从左往右计数匹配 (?: 开头的分组不计数 |

